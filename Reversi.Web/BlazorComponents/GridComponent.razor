@using Microsoft.AspNetCore.Components.Web
@using Reversi.Web.Services.Interfaces
@inject IGameService GameService

<h3>Grid Component</h3>

<GameInformation />

<table>
    @for (int row = 0; row < DisplayedBoard.Length; row++)
    {
        <tr>
            @for (int col = 0; col < DisplayedBoard[row].Length; col++)
            {
                <td>
                    <TileComponent message="@DisplayedBoard[row][col].ToString()" row="@row" column="@col" OnMoveSelected="MoveSelected"></TileComponent>
                </td>
            }
        </tr>
    }
</table>
@code {

    public string[] DisplayedBoard => GameService.GetOutput();

    protected async Task MoveSelected(string move)
    {
        var row = int.Parse(move.Split(',')[0]);
        var column = int.Parse(move.Split(',')[1]);

        GameService.PlaceCounter(row, column);
    }

}
